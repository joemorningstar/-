##运输层

###3.1.1 运输层和网络层的关系

网络层提供了主机之间的逻辑通信， 运输层提供了运行在不同主机上的进程之间的逻辑通信.

运输层协议只工作在端系统当中。端系统中，运输层协议将来自应用进程的报文移动到网络边缘（网络层）

###3.1.2 因特网运输层概述

这本书用报文段（segment）来表示TCP、UDP的分层。IP是不可靠服务。

TCP、UDP的基本职责是，将两个端系统的IP交付服务扩展为运行在端系统上的两个进程上的交付服务。这称为运输层的多路复用与多路分解。

###3.2 多路复用与多路分解

多路复用和多路分解是所有计算机网络都需要的。

多路分解(demultiplexing)：将运输层报文段中的数据交付到正确的套接字。
多路复用(multiplexing)：从不同套接字中收集数据块并且为每个数据块封装上首部信息（以后会用这些首部信息进行分解）从而生成报文段。

多路分解和多路复用实际上是如何工作的：

* 运输层多路复用

要求：（1）套接字有唯一的标识符 （2）每个报文段有特殊字段来指示该报文段索要交付到的套接字（这些特殊字段是源端口号和目的端口号）

端口号是一个16bit的数。0～1023之间的端口号称为周知端口号(well-known port number)是受到限制的，他们保留给诸如HTTP(80)、FTP(21)这样的周知应用层协议来使用。

1.无连接的多路复用与多路分解

特殊标识为一个二元组： 源端口号与目的端口号

2.面向连接的多路复用与多路分解 

TCP多路分解 TCP套接字与UDP套接字的一个区别在于：TCP套接字是由一个四元组（源IP地址，源端口号，目的IP地址，目的端口号）来标识的。

TCP服务器应用程序有一个“欢迎套接字”，在端口12000上等待来自TCP客户的连接建立请求。

创建一个新的套接字后，下面四个值：源IP地址，源端口号，目的IP地址，目的端口号标识新的套接字。所有后续到达的报文，如果这四个值都匹配就被分解到这个套接字。